---
title: "[四] 函数"
author: all_nan
date: 2019-09-28
---

## 函数

Dart是一个完全面向对象的语言，函数也是对象并且有一个类型[Function](https://api.dart.dev/stable/dart-core/Function-class.html)。这意味着函数也可以被声明为变量，或者可以成为其他函数的参数。当一个类也是一个函数时，你也可以用它来声明实例。更多信息参阅[可调用类](https://dart.dev/guides/language/language-tour#callable-classes)。

## 声明函数

### 一个基本的函数声明

```Dart
bool isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

尽管Effective Dart推荐为公开API文档添加类型声明，但是没有声明类型的情况下函数依然可用。

```Dart
isNoble(atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

如果函数中只包含了一个表达式，可以用` => `指定方法体表达式

```Dart
bool isNoble(int atomicNumber)
 => _nobleGases[atomicNumber] != null;
```

`=> expr`语法是`{return expr;}`的简写，`=>`表达式有时被称为箭头语法。

:::tip Note
当函数中在只存在一个表达式，而不是语句的时候，才可以放在`=>`和`;`中间，例如你不可以放入一个[if语句](https://dart.dev/guides/language/language-tour#if-and-else)，但是可以用[条件表达式](https://dart.dev/guides/language/language-tour#conditional-expressions)。
:::

一个函数可以拥有两种参数：必要参数和可选函数。必要函数放在参数开始，后面跟上所有的可选参数。可选参数可以是命名参数也可以是位置参数。

:::tip 
一些API文档中，特别是[Flutter](https://flutter.dev/)组件构造器中，只使用了命名参数，即使参数是强制的。更多细节参考后续内容。
:::

## 可选参数

可选参数可以是命名参数或者位置参数，但不能两者都是。

### 命名参数

当定义一个函数的时候，用`{param1,param2}`来指定命名参数：

```Dart
/// Sets the [bold] and [hidden] flags ...
void enableFlags({bool bold, bool hidden}) {...}
```

当调用这个函数的时候，可以用`parmaName:value`的形式来指定命名参数:

```Dart
enableFlags(bold: true, hidden: false);
```

虽然命名参数是一种可选参数，但是可以用[@required](https://pub.dev/documentation/meta/latest/meta/required-constant.html)注解来表明该参数是强制的，用户调用该函数的时候必须为这个参数提供一个值：

```Dart
const Scrollbar({Key key, @required Widget child})
```

如果创建上述对象Scrollbar的时候没有提供child参数，分析器就会抛出一个错误。

要使用[@required](https://pub.dev/documentation/meta/latest/meta/required-constant.html)注解，需要先加入它的依赖包[meta](https://pub.dev/packages/meta)，并且导入`package:meta/meta.dart`。

### 位置参数

